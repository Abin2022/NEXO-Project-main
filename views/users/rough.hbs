<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script> 
function addToCart(productId, event) {
  event.preventDefault(); // Prevent the default behavior of the <a> tag

  // Send an AJAX request to the server
  const xhr = new XMLHttpRequest();
  xhr.open('POST', '/add-cart', true);
  xhr.setRequestHeader('Content-Type', 'application/json');
  xhr.onreadystatechange = function () {
    if (xhr.readyState === 4) {
      if (xhr.status === 200) {
        // Handle the server response here (if needed)
        showSuccessAlert();
      } else if (xhr.status === 400) {
        console.log('status is 400 ')
        // Product is out of stock
        showOutOfStock() 
      } else {
        // Other server errors
        swal("Error", "An error occurred while adding the product to cart.", "error");
      }
    }
  };
  xhr.onerror = function() {
    console.log("Request error");
  };

  xhr.send(JSON.stringify({ productId: productId }));
}
</script>
<script>
function showSuccessAlert() {
  Swal.fire({
    title: "Success",
    text: "Product added to cart!",
    icon: "success",
    showCancelButton: false,
    confirmButtonColor: "#000000",
    confirmButtonText: "OK",
    customClass: {
      container: "swal-container",
      title: "swal-title",
      text: "swal-text",
      confirmButton: "swal-button"
    },
    onOpen: () => {
      // Set the text color to white
      const swalContainer = document.querySelector(".swal-container");
      swalContainer.style.color = "white";

      // Remove the border from the OK button
      const okButton = document.querySelector(".swal-button");
      okButton.style.border = "none";
    }
  });
}

function showOutOfStock() {
  Swal.fire({
    title: "Out of Stock",
    text: "This product is currently out of stock.",
    icon: "error",
    showCancelButton: false,
    confirmButtonColor: "#000000",
    confirmButtonText: "OK",
    customClass: {
      container: "swal-container",
      title: "swal-title",
      text: "swal-text",
      confirmButton: "swal-button"
    },
    onOpen: () => {
      // Set the text color to white
      const swalContainer = document.querySelector(".swal-container");
      swalContainer.style.color = "white";

      // Remove the border from the OK button
      const okButton = document.querySelector(".swal-button");
      okButton.style.border = "none";
    }
  });
}
</script>